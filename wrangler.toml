# ============================================
# Cloudflare Workers é…ç½®æ–‡ä»¶
# é …ç›®: Flux AI Pro - NanoBanana Edition
# ç‰ˆæœ¬: 11.16.0
# æ›´æ–°: 2026-02-19
# ============================================

name = "flux-ai-pro"
main = "worker.js"
compatibility_date = "2024-12-01"

# ============================================
# KV å­˜å„²ç¶å®š (NanoBanana é™æµå¿…éœ€ + ç®¡ç†å¾Œå°ç³»çµ±)
# âš ï¸ è«‹åŸ·è¡Œ: npx wrangler kv:namespace create "FLUX_KV"
# ç„¶å¾Œå°‡ç”Ÿæˆçš„ id å¡«å…¥ä¸‹æ–¹
#
# KV å­˜å„²ç”¨é€”:
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ã€Nano Pro é™æµå’Œé…é¡ç®¡ç†ã€‘
# - nano_limit:{ip} (IP é™æµè¨ˆæ•¸ï¼Œ60s TTL)
# - rate_limit:{ip} (API é€Ÿç‡é™åˆ¶è¨ˆæ•¸)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ã€ç®¡ç†å¾Œå°ç³»çµ± - èº«ä»½é©—è­‰ã€‘
# - admin:credentials (ç®¡ç†å“¡æ†‘è­‰ï¼Œå« hash å¯†ç¢¼)
# - admin:tokens:{token} (JWT Token é©—è­‰ï¼Œ24h TTL)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ã€ç®¡ç†å¾Œå°ç³»çµ± - é¢¨æ ¼ç®¡ç†ã€‘
# - admin:styles (è‡ªå®šç¾©é¢¨æ ¼é…ç½® JSON)
#   çµæ§‹: { custom_styles: { [id]: StyleConfig } }
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ã€ç®¡ç†å¾Œå°ç³»çµ± - æ¨¡å‹é…ç½®ã€‘
# - admin:providers (ä¾›æ‡‰å•†å•Ÿç”¨/ç¦ç”¨ç‹€æ…‹)
#   çµæ§‹: { providers: { [id]: ProviderConfig }, global_settings: {} }
# - admin:custom_models (è‡ªå®šç¾©æ¨¡å‹é…ç½®)
#   çµæ§‹: { models: { [id]: CustomModelConfig } }
# - admin:custom_providers (è‡ªå®šç¾© API ä¾›æ‡‰å•†)
#   çµæ§‹: { providers: { [id]: CustomProviderConfig } }
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ã€ç®¡ç†å¾Œå°ç³»çµ± - åƒæ•¸èª¿æ•´ã€‘
# - admin:parameters (å„ªåŒ–è¦å‰‡ã€é€Ÿç‡é™åˆ¶é…ç½®)
#   çµæ§‹: { optimization_rules: {}, rate_limits: {} }
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ã€çµ±è¨ˆèˆ‡ç›£æ§ã€‘
# - online:{ip} (åœ¨ç·šç”¨æˆ¶è¨ˆæ•¸ï¼Œ60s TTL)
# - stats:daily:{date} (æ¯æ—¥è«‹æ±‚çµ±è¨ˆ)
# - stats:total (ç¸½è«‹æ±‚è¨ˆæ•¸)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ã€æ•¸æ“šå‚™ä»½ã€‘
# - å¯é€šéç®¡ç†å¾Œå°å°å‡º/å°å…¥æ‰€æœ‰ admin:* æ•¸æ“š
# ============================================
[[kv_namespaces]]
binding = "FLUX_KV"
id = "65c2232e78044e749adb797599cb6ac8"

# ============================================
# Workers AI ç¶å®šï¼ˆç”¨æ–¼ä¸­æ–‡è‡ªå‹•ç¿»è­¯ï¼‰
# ============================================
[ai]
binding = "AI"

# ============================================
# ç’°å¢ƒè®Šé‡ï¼ˆéæ•æ„Ÿï¼‰
# ============================================
[vars]
WORKER_VERSION = "11.16.0"
DEFAULT_MODEL = "flux-schnell"
MAX_WIDTH = 4096
MAX_HEIGHT = 4096
MAX_TIMEOUT = 300000
ENVIRONMENT = "production"

# ============================================
# Secrets é€šé wrangler secret å‘½ä»¤è¨­ç½®
# ğŸ” æ¨è–¦è¨­ç½®:
# ============================================
# ã€API ä¾›æ‡‰å•† Keysã€‘
# 1. POLLINATIONS_API_KEY (Pollinations åœ–åƒç”Ÿæˆ)
# 2. INFIP_API_KEY (Ghostbot/Infip)
# 3. AQUA_API_KEY (Aqua Server)
# 4. KINAI_API_KEY (Kinai API)
# 5. AIRFORCE_API_KEY (Airforce API)
# 6. NONPON_API_KEY (Nonpon API)
#
# ã€è‡ªå®šç¾©ä¾›æ‡‰å•† API Keysã€‘
# å¯åœ¨ç®¡ç†å¾Œå°ã€Œæ¨¡å‹é…ç½®ã€é é¢ç›´æ¥é…ç½®
# æ”¯æ´ OpenAI å…¼å®¹ã€Stability AI ç­‰è‡ªå®šç¾©ä¾›æ‡‰å•†
#
# ã€ç®¡ç†å¾Œå°é…ç½®ã€‘
# é»˜èªç®¡ç†å“¡å¸³è™Ÿ: admin
# é»˜èªå¯†ç¢¼: admin123
# âš ï¸ é¦–æ¬¡ç™»å…¥å¾Œè«‹ç«‹å³ä¿®æ”¹å¯†ç¢¼ï¼
# ============================================
# è¨­ç½®å‘½ä»¤ç¯„ä¾‹ï¼š
# npx wrangler secret put POLLINATIONS_API_KEY
# npx wrangler secret put INFIP_API_KEY
# npx wrangler secret put AQUA_API_KEY
# npx wrangler secret put KINAI_API_KEY
# npx wrangler secret put AIRFORCE_API_KEY
# npx wrangler secret put NONPON_API_KEY
#
# æŸ¥çœ‹æ‰€æœ‰ secrets:
# npx wrangler secret list
#
# åˆªé™¤ secret:
# npx wrangler secret delete SECRET_NAME
